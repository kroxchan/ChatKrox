<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agent Meeting Room</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-a"></div>
    <div class="bg-shape bg-shape-b"></div>

    <header class="topbar panel">
      <div>
        <h1>Agent Meeting Room</h1>
        <p class="subtitle">OpenClaw / Codex 可视化讨论台</p>
        <button id="newMeetingBtn" class="ghost top-action" type="button">新建会话</button>
      </div>
      <div class="status-grid">
        <div><span>会议</span><strong id="meetingTitle">-</strong></div>
        <div><span>当前话题</span><strong id="currentTopic">-</strong></div>
        <div><span>消息数</span><strong id="messageCount">0</strong></div>
        <div><span>Token估算</span><strong id="tokenCount">0</strong></div>
        <div><span>连接状态</span><strong id="wsStatus">连接中...</strong></div>
      </div>
    </header>

    <main class="layout">
      <aside class="panel col topics">
        <div class="panel-title">
          <h2>话题列表</h2>
        </div>

        <form id="topicForm" class="stack gap-sm">
          <input id="topicInput" type="text" placeholder="发起一个新话题..." required />
          <button type="submit">创建话题</button>
        </form>

        <ul id="topicList" class="topic-list"></ul>
      </aside>

      <section class="panel col timeline">
        <div class="panel-title">
          <h2>实时对话流</h2>
          <button id="refreshBtn" class="ghost">刷新</button>
        </div>
        <div id="messageStream" class="message-stream"></div>
        <div class="panel-title split-title">
          <h2>系统事件</h2>
        </div>
        <div id="eventStream" class="event-stream"></div>
      </section>

      <aside class="panel col control">
        <div class="panel-title">
          <h2>主持控制台</h2>
        </div>

        <form id="messageForm" class="stack gap-sm">
          <textarea id="messageInput" rows="4" placeholder="输入你的主持发言或指令..."></textarea>
          <div class="upload-box">
            <input id="fileInput" type="file" />
            <input id="fileCaption" type="text" placeholder="文件说明（可选）" />
            <button id="uploadBtn" class="ghost" type="button">发送图片/文件</button>
          </div>
          <button type="submit">发送发言</button>
        </form>

        <div class="control-grid">
          <button id="pauseBtn" class="warn">暂停</button>
          <button id="resumeBtn">继续</button>
          <button id="nextTurnBtn">下一轮</button>
          <button id="endTopicBtn" class="warn">结束话题</button>
          <button id="startTopicBtn">开始选中话题</button>
        </div>

        <div class="stack gap-sm force-box">
          <label for="forceSpeaker">强制发言 Agent</label>
          <select id="forceSpeaker"></select>
          <button id="forceBtn">强制发言</button>
        </div>
      </aside>
    </main>

    <script type="module" src="/app.js"></script>
  </body>
</html>
